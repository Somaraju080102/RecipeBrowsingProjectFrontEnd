{"ast":null,"code":"import React,{useContext,useEffect,useState}from\"react\";import axios from\"axios\";import{RecipeHeader}from\"./RecipeHeader\";import{UserContext}from\"./RecipeUserContext\";import{Link}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export function RecipeMyRecipes(){const context=useContext(UserContext);const{recipeId,handleRecipeId}=context;const[recipes,setRecipes]=useState([]);// Function to handle deletion of a recipe\nconst handleDeleteRecipe=recipeIdToDelete=>{console.log(recipeIdToDelete);const deleteRecipe=async()=>{try{await axios.delete(\"http://localhost:8080/deleterecipe/\".concat(recipeIdToDelete));// Remove the deleted recipe from the state\nsetRecipes(prevRecipes=>prevRecipes.filter(recipe=>recipe.recipeId!==recipeIdToDelete));}catch(error){console.error(\"Error deleting recipe:\",error);}};deleteRecipe();};// Fetch user's recipes on component mount or when `recipeId` changes\nuseEffect(()=>{if(recipeId){const fetchData=async()=>{try{const response=await axios.get(\"http://localhost:8080/myrecipes/\".concat(recipeId.id));setRecipes(response.data);}catch(error){console.error(\"Error fetching recipes:\",error);}};fetchData();}},[recipeId]);// Handle user logout\nconst handleLogoutClick=()=>{setRecipes([]);// Clear recipes on logout\nhandleRecipeId(null);// Optionally clear recipeId\n};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center text-dark\",children:\"My Recipes\"}),recipeId?recipes.length>0?/*#__PURE__*/ // Show the table if there are recipes\n_jsxs(\"table\",{className:\"table table-striped\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"S.No\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Recipe Title\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Recipe Type\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Recipe Time\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Recipe Difficulty\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Recipe Ingredients\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Recipe Instructions\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Recipe Author\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Recipe Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:recipes.map((recipe,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:recipe.recipeTitle}),/*#__PURE__*/_jsx(\"td\",{children:recipe.recipeType}),/*#__PURE__*/_jsxs(\"td\",{children:[recipe.recipeTime,\" minutes\"]}),/*#__PURE__*/_jsx(\"td\",{children:recipe.recipeDifficulty}),/*#__PURE__*/_jsx(\"td\",{children:recipe.recipeIngredients}),/*#__PURE__*/_jsx(\"td\",{children:recipe.recipeInstrucions}),/*#__PURE__*/_jsx(\"td\",{children:recipe.recipeAuthor}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteRecipe(recipe.recipeId),className:\"btn btn-danger\",children:\"Delete\"})})]},recipe.recipeId))})]}):/*#__PURE__*/ // Show this section if all recipes are deleted\n_jsxs(\"div\",{className:\"text-center mt-5\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"No recipes found. Create a new recipe below.\"}),/*#__PURE__*/_jsx(Link,{to:\"/recipes\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",children:\"Create Recipe\"})})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"No user logged in or no recipes to display.\"}),/*#__PURE__*/_jsx(Link,{to:\"/login\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",children:\"Login\"})})]})]})});}","map":{"version":3,"names":["React","useContext","useEffect","useState","axios","RecipeHeader","UserContext","Link","jsx","_jsx","jsxs","_jsxs","RecipeMyRecipes","context","recipeId","handleRecipeId","recipes","setRecipes","handleDeleteRecipe","recipeIdToDelete","console","log","deleteRecipe","delete","concat","prevRecipes","filter","recipe","error","fetchData","response","get","id","data","handleLogoutClick","children","className","length","map","index","recipeTitle","recipeType","recipeTime","recipeDifficulty","recipeIngredients","recipeInstrucions","recipeAuthor","onClick","to"],"sources":["D:/react-sample/src/RecipeFrontend/src/RecipeCodeFrontend/RecipeMyRecipes.jsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { RecipeHeader } from \"./RecipeHeader\";\r\nimport { UserContext } from \"./RecipeUserContext\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport function RecipeMyRecipes() {\r\n  const context = useContext(UserContext);\r\n  const { recipeId, handleRecipeId } = context;\r\n\r\n  const [recipes, setRecipes] = useState([]);\r\n\r\n  // Function to handle deletion of a recipe\r\n  const handleDeleteRecipe = (recipeIdToDelete) => {\r\n    console.log(recipeIdToDelete);\r\n\r\n    const deleteRecipe = async () => {\r\n      try {\r\n        await axios.delete(\r\n          `http://localhost:8080/deleterecipe/${recipeIdToDelete}`\r\n        );\r\n        // Remove the deleted recipe from the state\r\n        setRecipes((prevRecipes) =>\r\n          prevRecipes.filter((recipe) => recipe.recipeId !== recipeIdToDelete)\r\n        );\r\n      } catch (error) {\r\n        console.error(\"Error deleting recipe:\", error);\r\n      }\r\n    };\r\n\r\n    deleteRecipe();\r\n  };\r\n\r\n  // Fetch user's recipes on component mount or when `recipeId` changes\r\n  useEffect(() => {\r\n    if (recipeId) {\r\n      const fetchData = async () => {\r\n        try {\r\n          const response = await axios.get(\r\n            `http://localhost:8080/myrecipes/${recipeId.id}`\r\n          );\r\n          setRecipes(response.data);\r\n        } catch (error) {\r\n          console.error(\"Error fetching recipes:\", error);\r\n        }\r\n      };\r\n      fetchData();\r\n    }\r\n  }, [recipeId]);\r\n\r\n  // Handle user logout\r\n  const handleLogoutClick = () => {\r\n    setRecipes([]); // Clear recipes on logout\r\n    handleRecipeId(null); // Optionally clear recipeId\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {/* <RecipeHeader /> */}\r\n      <div className=\"container mt-5\">\r\n        <h2 className=\"text-center text-dark\">My Recipes</h2>\r\n        {recipeId ? (\r\n          recipes.length > 0 ? ( // Show the table if there are recipes\r\n            <table className=\"table table-striped\">\r\n              <thead>\r\n                <tr>\r\n                  <th>S.No</th>\r\n                  <th>Recipe Title</th>\r\n                  <th>Recipe Type</th>\r\n                  <th>Recipe Time</th>\r\n                  <th>Recipe Difficulty</th>\r\n                  <th>Recipe Ingredients</th>\r\n                  <th>Recipe Instructions</th>\r\n                  <th>Recipe Author</th>\r\n                  <th>Recipe Action</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {recipes.map((recipe, index) => (\r\n                  <tr key={recipe.recipeId}>\r\n                    <td>{index + 1}</td>\r\n                    <td>{recipe.recipeTitle}</td>\r\n                    <td>{recipe.recipeType}</td>\r\n                    <td>{recipe.recipeTime} minutes</td>\r\n                    <td>{recipe.recipeDifficulty}</td>\r\n                    <td>{recipe.recipeIngredients}</td>\r\n                    <td>{recipe.recipeInstrucions}</td>\r\n                    <td>{recipe.recipeAuthor}</td>\r\n                    <td>\r\n                      <button\r\n                        onClick={() => handleDeleteRecipe(recipe.recipeId)}\r\n                        className=\"btn btn-danger\"\r\n                      >\r\n                        Delete\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          ) : (\r\n            // Show this section if all recipes are deleted\r\n            <div className=\"text-center mt-5\">\r\n              <p>No recipes found. Create a new recipe below.</p>\r\n              <Link to=\"/recipes\">\r\n                <button className=\"btn btn-primary\">Create Recipe</button>\r\n              </Link>\r\n            </div>\r\n          )\r\n        ) : (\r\n          <div>\r\n            <p>No user logged in or no recipes to display.</p>\r\n            <Link to=\"/login\">\r\n              <button className=\"btn btn-primary\">Login</button>\r\n            </Link>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC9D,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,YAAY,KAAQ,gBAAgB,CAC7C,OAASC,WAAW,KAAQ,qBAAqB,CACjD,OAASC,IAAI,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAExC,MAAO,SAAS,CAAAC,eAAeA,CAAA,CAAG,CAChC,KAAM,CAAAC,OAAO,CAAGZ,UAAU,CAACK,WAAW,CAAC,CACvC,KAAM,CAAEQ,QAAQ,CAAEC,cAAe,CAAC,CAAGF,OAAO,CAE5C,KAAM,CAACG,OAAO,CAAEC,UAAU,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CAE1C;AACA,KAAM,CAAAe,kBAAkB,CAAIC,gBAAgB,EAAK,CAC/CC,OAAO,CAACC,GAAG,CAACF,gBAAgB,CAAC,CAE7B,KAAM,CAAAG,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACF,KAAM,CAAAlB,KAAK,CAACmB,MAAM,uCAAAC,MAAA,CACsBL,gBAAgB,CACxD,CAAC,CACD;AACAF,UAAU,CAAEQ,WAAW,EACrBA,WAAW,CAACC,MAAM,CAAEC,MAAM,EAAKA,MAAM,CAACb,QAAQ,GAAKK,gBAAgB,CACrE,CAAC,CACH,CAAE,MAAOS,KAAK,CAAE,CACdR,OAAO,CAACQ,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAChD,CACF,CAAC,CAEDN,YAAY,CAAC,CAAC,CAChB,CAAC,CAED;AACApB,SAAS,CAAC,IAAM,CACd,GAAIY,QAAQ,CAAE,CACZ,KAAM,CAAAe,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC5B,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAA1B,KAAK,CAAC2B,GAAG,oCAAAP,MAAA,CACKV,QAAQ,CAACkB,EAAE,CAChD,CAAC,CACDf,UAAU,CAACa,QAAQ,CAACG,IAAI,CAAC,CAC3B,CAAE,MAAOL,KAAK,CAAE,CACdR,OAAO,CAACQ,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CACjD,CACF,CAAC,CACDC,SAAS,CAAC,CAAC,CACb,CACF,CAAC,CAAE,CAACf,QAAQ,CAAC,CAAC,CAEd;AACA,KAAM,CAAAoB,iBAAiB,CAAGA,CAAA,GAAM,CAC9BjB,UAAU,CAAC,EAAE,CAAC,CAAE;AAChBF,cAAc,CAAC,IAAI,CAAC,CAAE;AACxB,CAAC,CAED,mBACEN,IAAA,QAAA0B,QAAA,cAEExB,KAAA,QAAKyB,SAAS,CAAC,gBAAgB,CAAAD,QAAA,eAC7B1B,IAAA,OAAI2B,SAAS,CAAC,uBAAuB,CAAAD,QAAA,CAAC,YAAU,CAAI,CAAC,CACpDrB,QAAQ,CACPE,OAAO,CAACqB,MAAM,CAAG,CAAC,eAAK;AACrB1B,KAAA,UAAOyB,SAAS,CAAC,qBAAqB,CAAAD,QAAA,eACpC1B,IAAA,UAAA0B,QAAA,cACExB,KAAA,OAAAwB,QAAA,eACE1B,IAAA,OAAA0B,QAAA,CAAI,MAAI,CAAI,CAAC,cACb1B,IAAA,OAAA0B,QAAA,CAAI,cAAY,CAAI,CAAC,cACrB1B,IAAA,OAAA0B,QAAA,CAAI,aAAW,CAAI,CAAC,cACpB1B,IAAA,OAAA0B,QAAA,CAAI,aAAW,CAAI,CAAC,cACpB1B,IAAA,OAAA0B,QAAA,CAAI,mBAAiB,CAAI,CAAC,cAC1B1B,IAAA,OAAA0B,QAAA,CAAI,oBAAkB,CAAI,CAAC,cAC3B1B,IAAA,OAAA0B,QAAA,CAAI,qBAAmB,CAAI,CAAC,cAC5B1B,IAAA,OAAA0B,QAAA,CAAI,eAAa,CAAI,CAAC,cACtB1B,IAAA,OAAA0B,QAAA,CAAI,eAAa,CAAI,CAAC,EACpB,CAAC,CACA,CAAC,cACR1B,IAAA,UAAA0B,QAAA,CACGnB,OAAO,CAACsB,GAAG,CAAC,CAACX,MAAM,CAAEY,KAAK,gBACzB5B,KAAA,OAAAwB,QAAA,eACE1B,IAAA,OAAA0B,QAAA,CAAKI,KAAK,CAAG,CAAC,CAAK,CAAC,cACpB9B,IAAA,OAAA0B,QAAA,CAAKR,MAAM,CAACa,WAAW,CAAK,CAAC,cAC7B/B,IAAA,OAAA0B,QAAA,CAAKR,MAAM,CAACc,UAAU,CAAK,CAAC,cAC5B9B,KAAA,OAAAwB,QAAA,EAAKR,MAAM,CAACe,UAAU,CAAC,UAAQ,EAAI,CAAC,cACpCjC,IAAA,OAAA0B,QAAA,CAAKR,MAAM,CAACgB,gBAAgB,CAAK,CAAC,cAClClC,IAAA,OAAA0B,QAAA,CAAKR,MAAM,CAACiB,iBAAiB,CAAK,CAAC,cACnCnC,IAAA,OAAA0B,QAAA,CAAKR,MAAM,CAACkB,iBAAiB,CAAK,CAAC,cACnCpC,IAAA,OAAA0B,QAAA,CAAKR,MAAM,CAACmB,YAAY,CAAK,CAAC,cAC9BrC,IAAA,OAAA0B,QAAA,cACE1B,IAAA,WACEsC,OAAO,CAAEA,CAAA,GAAM7B,kBAAkB,CAACS,MAAM,CAACb,QAAQ,CAAE,CACnDsB,SAAS,CAAC,gBAAgB,CAAAD,QAAA,CAC3B,QAED,CAAQ,CAAC,CACP,CAAC,GAhBER,MAAM,CAACb,QAiBZ,CACL,CAAC,CACG,CAAC,EACH,CAAC,eAER;AACAH,KAAA,QAAKyB,SAAS,CAAC,kBAAkB,CAAAD,QAAA,eAC/B1B,IAAA,MAAA0B,QAAA,CAAG,8CAA4C,CAAG,CAAC,cACnD1B,IAAA,CAACF,IAAI,EAACyC,EAAE,CAAC,UAAU,CAAAb,QAAA,cACjB1B,IAAA,WAAQ2B,SAAS,CAAC,iBAAiB,CAAAD,QAAA,CAAC,eAAa,CAAQ,CAAC,CACtD,CAAC,EACJ,CACN,cAEDxB,KAAA,QAAAwB,QAAA,eACE1B,IAAA,MAAA0B,QAAA,CAAG,6CAA2C,CAAG,CAAC,cAClD1B,IAAA,CAACF,IAAI,EAACyC,EAAE,CAAC,QAAQ,CAAAb,QAAA,cACf1B,IAAA,WAAQ2B,SAAS,CAAC,iBAAiB,CAAAD,QAAA,CAAC,OAAK,CAAQ,CAAC,CAC9C,CAAC,EACJ,CACN,EACE,CAAC,CACH,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}